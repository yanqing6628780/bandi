extends ../layouts/default

mixin toHtml(item, cnt)
    - space = cnt ? "" : "&nbsp;"
    - for(i=0;i<cnt;i++)
        - space += '&nbsp;&nbsp;&nbsp;'
    tr
        td
            if cnt
                | !{space} |---
            | #{item.display_name}
        td= item.parent_id&&item.parent_id.display_name
        td= item.name
        td
            .btn-group
                a.btn.btn-success(href='#{url}/add/?parent_id=#{item._id}') 添加子分类
                a.btn.btn-info(href='#{url}/edit/#{item._id}') 改
                a.btn.btn-danger(href='#{url}/delete/#{item._id}') 删
    if item.son && item.son.length
        for it in item.son
            +toHtml(it, cnt+1)
block content
    - var url = '/admin/category'
    include ./alert
    div.row
        div.col-md-12
            a.btn.btn-success(href='#{url}/add/') 新增
    table.table
        thead
            th 分类名称
            th 父分类
            th 别名
            th 操作
        tbody
            each item,index in list
                +toHtml(item, 0)
